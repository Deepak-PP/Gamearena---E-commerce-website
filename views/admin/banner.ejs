<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Product Page - Admin HTML Template</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <!-- https://fonts.google.com/specimen/Roboto -->
    <link rel="stylesheet" href="/fontawesome.min.css" />
    <!-- https://fontawesome.com/ -->
    <link rel="stylesheet" href="/bootstrap.min.css" />
    <!-- https://getbootstrap.com/ -->
    <link rel="stylesheet" href="/templatemo-style.css">
    <!--
	Product Admin CSS Template
	https://templatemo.com/tm-524-product-admin
	-->
</head>
<style>
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
    }

    .modal-content {
        background-color: #fefefe;
        margin: 10% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 90%;
        max-width: 500px;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #ddd;
    }

    .modal-header h2 {
        margin: 0;
    }

    .close {
        font-size: 24px;
        font-weight: bold;
        color: #aaa;
        text-align: center;
        cursor: pointer;
        border: none;
        background: none;
    }

    .close:focus,
    .close:hover {
        color: #000;
        text-decoration: none;
        cursor: pointer;
    }

    @media screen and (max-width: 768px) {
        .modal-content {
            width: 90%;
            margin: 20% auto;
        }
    }
</style>


<body id="reportsPage"
    style="background-image: url(https://images.pexels.com/photos/1069798/pexels-photo-1069798.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1); background-size: cover;">
</body>>
<nav class="navbar navbar-expand-xl pl-1">
    <a href="" class="text-decoration-none">
        <span class="h1 text-uppercase text-danger px-2" style=" background-color: rgba(0, 0, 0, 0.6);">Game</span>
        <span class="h1 text-uppercase text-dark bg-danger px-2 ml-n1">Arena</span>
    </a>
    <div class="container h-100">


        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mx-auto h-100">
                <li class="nav-item">
                    <a class="nav-link " href="/admin/dash">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                        <span class="sr-only">(current)</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/admin/sales">
                        <i class="far fa-file-alt"></i></i> Reports
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/admin/categories">
                        <i class="fa-solid fa-puzzle-piece"></i> Categories
                    </a>
                </li>


                <li class="nav-item">
                    <a class="nav-link" href="/admin/products">
                        <i class="fas fa-shopping-cart"></i> Products
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/admin/orders">
                        <i class="fa-regular fa-rectangle-list"></i> Orders
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/admin/customers">
                        <i class="far fa-user"></i> Customers
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link " href="/admin/coupon">
                        <i class="fa-solid fa-ticket"></i> Coupons
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link active" href="/admin/banner">
                        <i class="fa-solid fa-panorama"></i> Banner
                    </a>
                </li>



            </ul>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link d-block" href="/admin/adminLogout">
                        <i class="fa-solid fa-power-off"></i><br>Logout
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>



<!-- customer list -->
<div class="container mt-5">
    <a href="/admin/bannerAdd"><button class="btn btn-danger  px-4 py-2 ml-auto">ADD BANNER</button></a>
    <div class="row tm-content-row">
        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 tm-block-col">
            <div class="tm-bg-primary-dark tm-block tm-block-products">
                <div class="tm-product-table-container">
                    <table class="table table-hover tm-table-small tm-product-table">
                        <thead>
                            <tr>
                                <th scope="col">SL.No</th>
                                <th scope="col">Name</th>
                                <th scope="col">Image</th>
                                <th scope="col">Description</th>
                                <th scope="col">Action</th>

                             
                           
                            </tr>
                        </thead>
                        <tbody>
                            <% if(banners.length>0) {
                                for(let i=0;i <banners.length; i++){ %>
                                    <tr>

                                        <td>
                                            <%= [i+1] %>
                                        </td>
                                        <td class="tm-product-name">
                                            <%= banners[i].name %>
                                        </td>
                                        <td id="em1" style="width: 6.25rem;">
                                        <div id="myCarousel" class="carousel slide" data-ride="carousel">
                                            <div class="carousel-inner" style="width: 300px;">
                                                <% for (let j=0; j < banners[i].image.length; j++) { %>
                                                    <div class="carousel-item <% if (j === 0) { %>active<% } %>">
                                                        <img class="d-block w-100" src="/productImages/<%=banners[i].image[j]%>" alt="Image <%=j%>">
                                                    </div>
                                                    <% } %>
                                            </div>
                                            <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Previous</span>
                                            </a>
                                            <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Next</span>
                                            </a>
                                        </div>

                                            
                                        </td>
                                        <td>
                                            <% for(let j=0;j<banners[i].description.length;j++){ %>
                                                <div>Banner<%=[j+1]%> description-<%= banners[i].description[j] %></div>
                                                <% } %>
                                           
                                        </td>
                                                <td>
                                                    <form action="/admin/deleteBanner/?id=<%= banners[i]._id %>" method="POST">
                                                        <button onclick=" formSubmit()" type="submit" class="btn btn-link btn-sm btn-rounded">
                                                      Delete Banner
                                                        </button>
                                                    </form>


                                                    </td>
                                                   

                                    </tr>

                                    <% } %>

                                        <%}else { %>
                                            <tr>
                                                <td colspan="5">Banner not found</td>

                                            </tr>
                                            <% } %>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

</form>
<!-- Checkout End -->


<footer class="tm-footer row tm-mt-small">
    <div class="col-12 font-weight-light">
        <p class="text-center text-white mb-0 px-4 small">
            Copyright &copy; <b>2018</b> All rights reserved.

            Design: <a rel="nofollow noopener" href="https://templatemo.com" class="tm-footer-link">Template Mo</a>
        </p>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>





<script src="/jquery-3.3.1.min.js"></script>
<!-- https://jquery.com/download/ -->
<script src="/bootstrap.min.js"></script>

<script src="https://kit.fontawesome.com/d4801b7ff5.js" crossorigin="anonymous"></script>
<!-- https://getbootstrap.com/ -->
"
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script type="text/javascript">
    $(function () {
        $(".tm-product-name").on("click", function () {
            window.location.href = "edit-product.html";
        });
    });

    $(document).ready(function () {
            // Activate Carousel
            $("#myCarousel").carousel();
        });

    

    function textswitch() {
        var btn = document.getElementById("myButton");

        if (btn.value == "BLOCK") {
            btn.value = "UNBLOCK";
            btn.innerHTML = "UNBLOCK";
        }
        else {
            btn.value = "BLOCK";
            btn.innerHTML = "BLOCK";
        }

    }


    var addressModal = document.getElementById("address-modal");
    var addAddressLink = document.getElementById("add-address-link");

    addAddressLink.addEventListener("click", function (e) {
        e.preventDefault();
        addressModal.style.display = "block";
    });

    // To hide the modal when the user clicks outside of it
    window.addEventListener("click", function (e) {
        if (e.target == addressModal) {
            addressModal.style.display = "none";
        }
    })

   
           $(document).on('change', '#customFile', function () {
                var files = $(this).prop("files");
                var imagePreviewContainer = $("#image-preview-container");
                var descriptionContainer = $("#description-container");

                imagePreviewContainer.empty();
                descriptionContainer.empty();

                $.each(files, function (index, file) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        imagePreviewContainer.append('<img src="' + e.target.result + '" class="img-thumbnail mr-2">');
                        descriptionContainer.append('<textarea name="description[]" class="form-control mb-2" required placeholder="Banner Description"></textarea>');
                    }
                    reader.readAsDataURL(file);
                });
            });

            function formSubmit() {
                    event.preventDefault(); // prevent form submit
                    let form = event.target.form; // storing the form
                    swal({
                        title: "Are you sure?",
                        text: "Banner will be deleted",
                        type: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#d33",
                        cancelButtonColor: "#DD6B55",
                        confirmButtonText: "Yes, delete banner",
                        cancelButtonText: "No, Abort!",
                        closeOnConfirm: false,
                        closeOnCancel: false,

                    },
                        function (isConfirm) {
                            if (isConfirm) {
                                form.submit();          // submitting the form when user press yes
                            } else {
                                swal("Cancelled", "Banner not deleted", "error");
                            }
                        });
                }

    </script>







</body>

</html>